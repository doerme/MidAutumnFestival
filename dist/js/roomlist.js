/*!
 * @project : MidAutumnFestival
 * @version : 0.0.1
 * @author  : 
 * @update  : 2017-10-06 9:59:00 pm
 */!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./js/",e(0)}([function(t,e,n){$(function(){var t={pageTpl:{roomlist:n(6)},buyNum:1,init:function e(){this.bindEvent(),this.getRoomList(),this.getAgentStatus(),this.ifShowRedPC()},ifShowRedPC:function o(){var t=this;$.ajax({url:"http://www.czcycm.com/app/hb/is_hb",type:"post"}).done(function(t){"string"==typeof t&&(t=JSON.parse(t)),console.log(t),1==t.data.is_hb&&($(".js-begin-open").removeClass("hide"),$(".js-begin-avatar").attr({src:t.data.me.headimgurl}),$(".js-begin-nickname").html(t.data.me.nickname))})},getRoomList:function r(){var t=this;$.ajax({url:"http://www.czcycm.com/app/hb/my_room",type:"post"}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),console.log(e),$(".js-roomlist-main").html(t.pageTpl.roomlist({data:e.data}))})},getAgentStatus:function i(){var t=this;$.ajax({url:"http://www.czcycm.com/app/wallet/is_vip",type:"get"}).done(function(t){console.log(t),0==t.code&&(1==t.data.is_vip?$(".roomlist-banner").attr({src:"http://www.czcycm.com/mex/mid/img/page/agent.png",isvip:"1"}):$(".roomlist-banner").attr({src:"http://www.czcycm.com//mex/mid/img/page/be-agent.png",isvip:"0"}))})},payCard:function a(){var t=this;$.ajax({url:"http://www.czcycm.com/app/wallet/cardPay",type:"get"}).done(function(t){console.log(t),0==t.code&&(window.location.href=t.data.pay_url)})},bindEvent:function c(){var t=this,e=10;$(".js-begin-open").on("click",function(){window.location.href="http://www.czcycm.com/app/wallet/index"}),$(".roomlist-banner").on("click",function(){"1"==$(this).attr("isvip")?window.location.href="/app/wallet/index":t.payCard()}),$(".js-create-room-bt").on("click",function(){$(".js-create-room-window").removeClass("hide")}),$(".js-room-choose").on("click",".twn-choose",function(){$(".js-room-choose > .selected").removeClass("selected"),$(this).addClass("selected"),e=$(this).data("num")}),$(".js-create-now").on("click",function(){console.log("add room money",e),$(".js-create-room-window").addClass("hide"),$.ajax({url:"http://www.czcycm.com/app/hb/add_room",type:"post",data:{type:1,money:e}}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),console.log(e),1==e.code?($(".js-create-success").removeClass("hide"),t.getRoomList()):$(".js-create-fail").removeClass("hide")})}),$(".toast-window-mask").on("click",function(){$(this).parent(".toast-window").addClass("hide")}),$(".twn-t-close, .js-win-close").on("click",function(){$(this).parents(".toast-window").addClass("hide")})}};t.init()})},,,,,function(t,e){!function(){function e(t,e){return(/string|function/.test(typeof e)?s:c)(t,e)}function n(t,e){return"string"!=typeof t&&(e=typeof t,"number"===e?t+="":t="function"===e?n(t.call(t)):""),t}function o(t){return d[t]}function r(t){return n(t).replace(/&(?![\w#]+;)|[<>"']/g,o)}function i(t,e){if(m(t))for(var n=0,o=t.length;o>n;n++)e.call(t,t[n],n,t);else for(n in t)e.call(t,t[n],n)}function a(t,e){var n=/(\/)[^\/]+\1\.\.\1/,o=("./"+t).replace(/[^\/]+$/,""),r=o+e;for(r=r.replace(/\/\.\//g,"/");r.match(n);)r=r.replace(n,"/");return r}function c(t,n){var o=e.get(t)||l({filename:t,name:"Render Error",message:"Template not found"});return n?o(n):o}function s(t,e){if("string"==typeof e){var n=e;e=function(){return new u(n)}}var o=p[t]=function(n){try{return new e(n,t)+""}catch(o){return l(o)()}};return o.prototype=e.prototype=f,o.toString=function(){return e+""},o}function l(t){var e="{Template Error}",n=t.stack||"";if(n)n=n.split("\n").slice(0,2).join("\n");else for(var o in t)n+="<"+o+">\n"+t[o]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+n),e}}var p=e.cache={},u=this.String,d={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},m=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=e.utils={$helpers:{},$include:function(t,e,n){return t=a(n,t),c(t,e)},$string:n,$escape:r,$each:i},h=e.helpers=f.$helpers;e.get=function(t){return p[t.replace(/^\.\//,"")]},e.helper=function(t,e){h[t]=e},t.exports=e}()},function(t,e,n){var o=n(5);t.exports=o("82e3c790-aa9e-11e7-8c89-8b96dfde0183",function(t,e){"use strict";var n=this,o=n.$helpers,r=n.$each,i=t.data,a=t.v,c=t.i,s=n.$escape,l="";return r(i,function(t,e){l+=' <li> <img class="rl-avatar" src="',l+=s(t.pic),l+='" /> <div class="rl-name">',l+=s(t.name),l+='</div> <div class="rl-num">在线人数',l+=s(t.numb),l+='</div> <a class="rl-in js-rl-in" href="/app/wallet/room?roomid=',l+=s(t.room_id),l+='" data-id="',l+=s(t.room_id),l+='">进入</a> </li> '}),new String(l)})}]);